# hse_nes_datascience

<h1 style="text-align:center;">Анализ капитализации крупнейших мировых бирж и обработка данных котировок акций</h1>

**Автор**: Дарья Авдеёнок. Совместная программа по экономике ВШЭ-РЭШ, второй курс.

В рамках проекта было сформулировано и успешно решено средствами Python две основные задачи:

1. **Проанализировать крупнейшие биржи и их месторасположение.**
Задача разбилась на следующие подзадачи:

- Получить данные с веб-страницы о крупнейших биржах.
- Выполнить необходимый препроцессинг данных (выяснить структуру, удалить невалидные значения, сделать преобразование текстовых данных в численные).
- Построить капитализацию каждой биржи на диаграмме.
- Построить на интерактивной карте метки городов, в которых базируются биржи.
- Для каждой страны посчитать суммарную капитализацию бирж, которые в ней располагаются. Построить heatmap-график с отметками бирж.

2. **Анализ временных рядов акций с помощью линейной регрессии. Выделение компаний, чьи акции растут, когда в среднем рынок падает.**

Для характеристики ситуации на мировом рынке применяются различные индексы, которые рассчитываются на основе показателей множества компаний. Одним из известных является индекс S&P 500. Он отражает взвешенное среднее стоимости акций крупнейших 500 компаний (веса берутся относительно доли капитализации компании). S&P 500 может помочь выделить одну из ситуаций "bull market" или "bear market", т.е. растет или падает рынок в среднем.

Нашей задачей будет за последние 2 года выделить непересекающиеся промежутки времени в 21 день, где индекс S&P 500  убывал более всего. И посмотреть акции каких компаний сильнее всего росли в эти периоды. Для оценки "скорости роста" будет использован коэффициент из линейной регресии на необходимом периоде.

Выделение подобных компаний и их последующий анализ может помочь игрокам биржи обратить внимание на корпорации, которые мало зависят от динамики глобального рынка и, следовательно, более надёжны для инвестирования.

Этапы решений второй подзадачи:

- скачать с веб-страницы информацию о текущих компаниях в S&P 500.
- скачать данные о катировках акций 500 компаний и S&P 500 индекса за последние 2 года.
- Реализовать линейную регрессию с помощью numpy (хотя можно вопсользоваться готовыми пакетами).
- Выделить непересекающиеся промежутки времени, когда индекс сильнее всего убывает.
- Проанализировать акции 500-та компаний на этих промежутках и выделить топ 3, чьи акции лушче всего росли.
- Построить соответствующие графики стоимостей акций.


**Использованные технологии**

- <u>Работа с DataFrame и Series в pandas</u>: read_html, loc, concat, rename, apply, astype, dropna, sort_values, slicing, iterrows, index, groupby, sum, append, plot, merge, join, rolling, фильтрация строк.


- <u>Анализ веб-страниц</u>: два набора данных были получены путём анализа веб-страниц с помощью обёртки lxml в pandas.


- <u>Обработка геоданных и построение графиков с ними</u>: ипользовались geopandas, geopy, pycountry и folium. Написаны фукнции, которые по названию города могут определить код страны, в котором он находится, и его gps координаты. Построены интерактивные и статичные графики.


- <u>Обработка и парсинг строк</u>: несколько раз применена библиотека regular expression для обработки текстовых данных, а также стандартные методы класcа str.


- <u>Скачивание финансовых данных</u>: используется интерфейс yahoo.finance для загрузки данных об акциях различных компаний (заметим, что у пакета нет открытой документации).


- <u>Обработка данных в numpy</u>: с помощью numpy реализована одномерная линейная регрессия.


- <u>Работа с датами</u>: для обработки временных рядов использован пакет datetime.


- <u>Построение графиков</u>: активно использованы различные возможности matplotlib.


**Общий объём кода без учёта комментариев: около 230 строк.**

